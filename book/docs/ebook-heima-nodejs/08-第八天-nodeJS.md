# nodeJS 第八天

黑马程序员

2015年9月10日的课程（6年了！）注意时效性

nodeJS 是6年前的版本，差距太大了；最好学习最新的版本

### 01 nodeJS 简介

创建者和创建原因已经学过了

- 语言：nodeJS 不是独立的语言，使用 JS 进行编程

- 架构：传统的后台架构是 LAMP：linux+Apache+mysql+php, nodeJS 不需要使用服务器软件上，与经典的架构不同。nodeJS 没有 web 容器。

### 02 nodeJS 特点

nodeJS uses an event-driven, no-blocking I/O model that makes it lightweight and efficient

单线程+非阻塞 I/O+事件驱动

传统服务器端语言中，多线程连接用户，每一个用户消耗 2MB 内存。8GB的服务器可以连接 4000个用户。当用户增加时，硬件成本上升。

nodeJS 只使用一个线程，多用户访问时，通过内部事件调度，在宏观上也是并行的。8GB的服务器可以用时处理超过4万的用户的连接。好处：操作系统不需要创建线程或者销毁线程的时间；缺点，一旦一个用户造成这个线程奔溃，整个服务就奔溃了，那么全部用户无法链接。

nodeJS 执行 JS 中，默认不会热更新程序。更改 JS 后，需要把服务器暂停，然后再次运行，才能显示更改后 的内容

### 03 nodeJS 原理

底层代码中，半数的代码是事件队列，回调函数队列的构建，用事件驱动完成任务调度。

单线程：减小内存开销；操作系统的内存换页。

非阻塞IO：不会等待IO执行结束，会执行后面的JS语句。

事件循环（event-loop）事件方式加入事件队列，等待执行。

nodeJS 不适合开发运算密集的服务，主要适合处理大量并发的IO。NodeJS 适合于 web-socket 配合，开发长连接的实时交互APP（用户表单收集；聊天室；直播室等）。

当时 NodeJS 还是一个小玩具，性能计算和传统的 Java 后端语言等没办法比。

国内：小公司使用Node做核心业务，大公司使用Node做一部分功能。现在公司中，使用 Node 处理用户操作的同步（server），用 Python 处理表单、用户管理、大部分的 HTTP 请求等；用 Go 和 C 进行底层文件交互。





