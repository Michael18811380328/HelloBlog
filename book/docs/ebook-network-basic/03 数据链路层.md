## 第三章 数据链路层

https://www.bilibili.com/video/BV1c4411d7jb?p=21

### P21 3.1 数据链路层概述

数据链路层地位：位于物理层之上，为网络层提供服务。

- 链路：一个结点和另一个相邻结点之间的物理线路（中间没有其他的结点）

- 数据链路：物理链路+软件硬件+通信协议。数据链路层以帧为单位传输和处理数据。

主要问题：封装成帧、差错检测、可靠传输。

- 封装成帧：数据链路层交付给网络层的协议数据单元就是帧，数据字段添加帧头和帧尾的过程就是封装成帧。数据字段就是向上层交付的协议数据单元。
- 差错检测：在帧尾部有一个检错码。收到帧后，根据特定算法，判断帧数据是否存在误码。
- 可靠传输：误码不能完全避免。如果能实现发送方发送什么有效内容，接收方可以获取这部分内容，就称为可靠传输。

使用广播信道的数据链路层：共享式以太网协议 CSMA/CD（全双工通信，需要处理数据碰撞），802.11局域网协议 CSMA/CA 分别对应有线网和无线网协议。

### P22 3.2 封装成帧

封装成帧：数据链路层给上层的协议数据单元，添加帧头和帧尾，使得成为帧。帧头和帧尾的作用是判断帧的边界（帧头帧尾是边界的标志，从物理层传递的比特流中，解析出一个个帧）。

帧分为 以太网 MAC 帧和 PPP 帧，数据格式不同。

MAC 帧：有源地址和目的地址，发送前，物理层需要加一个前导码，作为帧开始的标志。前导码后面就是 MAC 帧。不同帧之间间隔96比特的发送时间。

透明传输：数据链路层对上层传输的数据没有任何限制（内容和大小都不限制）好像数据链路层不存在，所以称为透明传输。

发送帧之前，对数据部分进行扫描。如果数据字段一部分，和帧头或者帧尾相同（统称帧定界符），首先在数据中添加转义符号。这样接收方根据根据转义符号先处理，就可以分离数据载荷部分。如果是面向字节的链路，那么就添加字节的转义符；如果是面向比特的链路，就添加比特的转义符。

例题中：高级数据链路控制协议 HDLC 采用帧头和帧为中的标志字段作为帧定界符，值是 01111110。使用这个协议编码后，需要对数据中连续的5个1，后面增加0，进行转义。这样，接收方判断6个联系的1，就是帧定界符。

帧数据部分尽量大（有效数据和帧定界符的比例才能增加，提高传输效率），同时考虑差错控制，所以规定一个帧数据部分最大长度：最大传送单元 MTU。



P23
3.3 差错检测
11:50
P24
3.4.1 可靠传输的基本概念
05:41
P25
3.4.2 可靠传输的实现机制 — 停止-等待协议
16:19
P26
3.4.3 可靠传输的实现机制 — 回退N帧协议
16:16
P27
3.4.4 可靠传输的实现机制 — 选择重传协议
13:37
P28
3.5 点对点协议PPP
11:42
P29
3.6.1 媒体接入控制的基本概念
04:22
P30
3.6.2 媒体接入控制 — 静态划分信道
17:37
P31
3.6.3 随机接入 — CSMA/CD协议
21:01
P32
3.6.4 随机接入— CSMA/CA协议
22:36
P33
3.7 MAC地址、IP地址以及ARP协议（1） — MAC地址
17:49
P34
3.7 MAC地址、IP地址以及ARP协议（2） — IP地址
12:55
P35
3.7 MAC地址、IP地址以及ARP协议（3） — ARP协议
07:29
P36
3.8 集线器与交换机的区别
14:05
P37
3.9 以太网交换机自学习和转发帧的流程
13:34
P38
3.10 以太网交换机的生成树协议STP
08:14
P39
3.11.1 虚拟局域网VLAN概述
05:22
P40
3.11.2 虚拟局域网VLAN的实现机制
19:16
