(function(a,b){if(typeof define==="function"&&define.amd){define([],b())}else{if(typeof module==="object"&&module.exports){module.exports=b()}else{a["watermark"]=b()}}}(this,function(){var a={};var b=function(v){var c={watermark_id:"wm_div_id",watermark_prefix:"mask_div_id",watermark_txt:"测试水印",watermark_x:20,watermark_y:20,watermark_rows:0,watermark_cols:0,watermark_x_space:100,watermark_y_space:50,watermark_font:"微软雅黑",watermark_color:"black",watermark_fontsize:"18px",watermark_alpha:0.15,watermark_width:100,watermark_height:100,watermark_angle:15,watermark_parent_width:0,watermark_parent_height:0,watermark_parent_node:null};if(arguments.length===1&&typeof arguments[0]==="object"){var k=arguments[0]||{};for(key in k){if(k[key]&&c[key]&&k[key]===c[key]){continue}else{if(k[key]||k[key]===0){c[key]=k[key]}}}}var l=document.getElementById(c.watermark_id);if(l){var z=l.parentNode;if(z){z.removeChild(l)}}var d=Math.max(document.body.scrollWidth,document.body.clientWidth)-c.watermark_width/2;var p=Math.max(document.body.scrollHeight,document.body.clientHeight,document.documentElement.clientHeight)-c.watermark_height/2;var r=arguments[0]||{};var f=c.watermark_parent_node;var u=0;var q=0;if(r.watermark_parent_width||r.watermark_parent_height){r.watermark_parent_width?(d=r.watermark_parent_width-c.watermark_width/2):(c.watermark_parent_node)?(d=f.offsetWidth-c.watermark_width/2):void 0;r.watermark_parent_height?(p=r.watermark_parent_height-c.watermark_height/2):(c.watermark_parent_node)?(p=Math.max(f.offsetHeight,f.scrollHeight)-c.watermark_height/2):void 0;if(f){u=f.offsetTop||0;q=f.offsetLeft||0;c.watermark_x=c.watermark_x+q;c.watermark_y=c.watermark_y+u}}else{if(f){u=f.offsetTop||0;q=f.offsetLeft||0;d=f.offsetWidth-c.watermark_width/2||0;p=(Math.max(f.offsetHeight,f.scrollHeight)-c.watermark_height/2)||0;c.watermark_x=c.watermark_x+q;c.watermark_y=c.watermark_y+u}}var h=document.getElementById(c.watermark_id);var o=null;if(!h){h=document.createElement("div");h.id=c.watermark_id;h.style.pointerEvents="none";if(typeof h.createShadowRoot==="function"){o=h.createShadowRoot()}else{o=h}var w=document.body.children;var g=Math.floor(Math.random()*(w.length-1));if(w[g]){document.body.insertBefore(h,w[g])}else{document.body.appendChild(h)}}else{if(h.shadowRoot){o=h.shadowRoot}}if(c.watermark_cols==0||(parseInt(c.watermark_x+c.watermark_width*c.watermark_cols+c.watermark_x_space*(c.watermark_cols-1))>d)){c.watermark_cols=parseInt((d-c.watermark_x+q)/(c.watermark_width+c.watermark_x_space));c.watermark_x_space=parseInt((d-c.watermark_x+q-c.watermark_width*c.watermark_cols)/(c.watermark_cols-1))}if(c.watermark_rows==0||(parseInt(c.watermark_y+c.watermark_height*c.watermark_rows+c.watermark_y_space*(c.watermark_rows-1))>p)){c.watermark_rows=parseInt((p-c.watermark_y+u)/(c.watermark_height+c.watermark_y_space));c.watermark_y_space=parseInt(((p-c.watermark_y+u)-c.watermark_height*c.watermark_rows)/(c.watermark_rows-1))}var n;var m;for(var t=0;t<c.watermark_rows;t++){m=c.watermark_y+(c.watermark_y_space+c.watermark_height)*t;for(var s=0;s<c.watermark_cols;s++){n=c.watermark_x+(c.watermark_width+c.watermark_x_space)*s;var A=document.createElement("div");var e=document.createTextNode(c.watermark_txt);A.appendChild(e);A.id=c.watermark_prefix+t+s;A.style.webkitTransform="rotate(-"+c.watermark_angle+"deg)";A.style.MozTransform="rotate(-"+c.watermark_angle+"deg)";A.style.msTransform="rotate(-"+c.watermark_angle+"deg)";A.style.OTransform="rotate(-"+c.watermark_angle+"deg)";A.style.transform="rotate(-"+c.watermark_angle+"deg)";A.style.visibility="";A.style.position="absolute";A.style.left=n+"px";A.style.top=m+"px";A.style.overflow="hidden";A.style.zIndex="9999";A.style.opacity=c.watermark_alpha;A.style.fontSize=c.watermark_fontsize;A.style.fontFamily=c.watermark_font;A.style.color=c.watermark_color;A.style.textAlign="center";A.style.width=c.watermark_width+"px";A.style.height=c.watermark_height+"px";A.style.display="block";A.style["-ms-user-select"]="none";o.appendChild(A)}}};a.init=function(c){window.addEventListener("load",function(){b(c)});window.addEventListener("resize",function(){b(c)});window.addEventListener("DOMContentLoaded",function(){b(c)})};a.load=function(c){b(c)};return a}));